sudo: required
dist: trusty
language: node_js
branches:
  only:
  - a-new-hope-episode-iv
node_js:
- 8.4.0
python:
- '3.5'
cache:
- pip
- yarn
install:
- pip install --user awscli
- npm install -g travis-ci-cloudfront-invalidation
- npm install
before_script:
- yarn
script: yarn run build
deploy:
  provider: s3
  access_key_id: $AWS_ACCESS_KEY
  secret_access_key: $AWS_SECRET_ACCESS_KEY
  bucket: sendgrid-knowledge-center-staging
  skip_cleanup: true
  local_dir: public
  acl: public_read
  on:
    repo: sendgrid/docs
    branch: a-new-hope-episode-iv
after_deploy:
<<<<<<< HEAD
- travis-ci-cloudfront-invalidation -a $AWS_ACCESS_KEY -s $AWS_SECRET_KEY -c $CLOUDFRONT_DISTRIBUTION_ID -i '/*' -b $TRAVIS_BRANCH -p $TRAVIS_PULL_REQUEST -o 'a-new-hope-episode-iv'
=======
- aws configure set preview.cloudfront true
- aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths /*
>>>>>>> upstream/a-new-hope-episode-iv
